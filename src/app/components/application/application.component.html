<div class="container" [ngClass]="{ center: state !== screenStateEnum.Form || ! dictionary }">
  <ng-template [ngIf]="dictionary">
    <!-- Form -->
    <ng-template [ngIf]="state === screenStateEnum.Form">
      <form #f="ngForm" (ngSubmit)="onSubmit(f)">
        <h1>{{ dictionary.name }}</h1>
        <hr>
        <p>Please upload a CSV using the box below:</p>
        <div class="dropbox"
        [ngClass]="{ active: dropboxActive, disabled: dropboxDisabled }"
        (dragover)="allowDrop($event)"
        (drop)="onDrop($event)"
        (dragleave)="onDragLeave()"
        (click)="openFileDialog()">
          <svg class="icon" *ngIf="! dropboxDisabled" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m354 60c0-33.085938-26.914062-60-60-60h-234c-33.085938 0-60 26.914062-60 60v234c0 33.085938 26.914062 60 60 60h96v40h40v-40h98c33.085938 0 60-26.914062 60-60v-96h39v-40h-39zm-40 234c0 11.027344-8.972656 20-20 20h-234c-11.027344 0-20-8.972656-20-20v-234c0-11.027344 8.972656-20 20-20h234c11.027344 0 20 8.972656 20 20zm158 138h40v40c0 22.089844-17.910156 40-40 40h-39v-40h39zm-199 40h40v40h-40zm80 0h40v40h-40zm159-274v40h-40v-40h-39v-40h39c22.089844 0 40 17.910156 40 40zm-40 78h40v40h-40zm0 78h40v40h-40zm-276 118h39v40h-39c-22.089844 0-40-17.910156-40-40v-40h40zm37-318h40v120h-120v-40h51.714844l-71.359375-71.359375 28.285156-28.28125 71.359375 71.355469zm0 0"/></svg>
          <lottie-animation-view *ngIf="dropboxDisabled" [options]="lottieConfig" width="40" height="40">
          </lottie-animation-view>
          <span>{{ selectedFile ? selectedFile.name : 'Drag and drop a CSV file into this box or click to browse' }}</span>
          <svg class="close-btn" *ngIf="selectedFile" (click)="unloadFile($event)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 174.239 174.239">
          	<path d="M87.12,0C39.082,0,0,39.082,0,87.12s39.082,87.12,87.12,87.12s87.12-39.082,87.12-87.12S135.157,0,87.12,0z M87.12,159.305
           	c-39.802,0-72.185-32.383-72.185-72.185S47.318,14.935,87.12,14.935s72.185,32.383,72.185,72.185S126.921,159.305,87.12,159.305z"/>
          	<path d="M120.83,53.414c-2.917-2.917-7.647-2.917-10.559,0L87.12,76.568L63.969,53.414c-2.917-2.917-7.642-2.917-10.559,0
           	s-2.917,7.642,0,10.559l23.151,23.153L53.409,110.28c-2.917,2.917-2.917,7.642,0,10.559c1.458,1.458,3.369,2.188,5.28,2.188
           	c1.911,0,3.824-0.729,5.28-2.188L87.12,97.686l23.151,23.153c1.458,1.458,3.369,2.188,5.28,2.188c1.911,0,3.821-0.729,5.28-2.188
           	c2.917-2.917,2.917-7.642,0-10.559L97.679,87.127l23.151-23.153C123.747,61.057,123.747,56.331,120.83,53.414z"/>
          </svg>
        </div>
        <input name="csvFile" ngModel #fileController type="file" accept=".csv, text/csv" (change)="onFileChange()">
        <div class="csv-headers-container">
          <select name="csvHeader" [ngModel]="null" required [disabled]="! selectedFile" #csvHeadersController class="csv-headers">
            <option [value]="null" disabled selected hidden>Select the literals column...</option>
            <option *ngFor="let header of csvHeaders" [value]="header">{{ header }}</option>
          </select>
        </div>
        <p>Or provide a list of plain literals separated by new lines:</p>
        <textarea #plainLiteralsController name="plainLiterals" ngModel required [disabled]="selectedFile" data-gramm_editor="false"></textarea>
        <div class="btn-group">
          <button [disabled]="f.invalid || formDisabled" type="submit" class="btn btn-primary">Start Matching</button>
        </div>
      </form>
    </ng-template>
    <!-- Matching -->
    <ng-template [ngIf]="state === screenStateEnum.Matching">
      <lottie-animation-view class="matching-animation" @jumpOut [options]="lottieConfig" width="256" height="256" (animCreated)="registerMatchingAnimation($event)">
      </lottie-animation-view>
      <span @fadeOut class="matching-message">{{ matchingMessage }}</span>
    </ng-template>
    <!-- Matching 1+ Results -->
    <ng-template [ngIf]="state === screenStateEnum.Results && matchResult.count">
      <lottie-animation-view class="matching-animation" @jumpIn [options]="lottieConfigSuccess" width="256" height="256" (animCreated)="delayAnimation($event, 200)">
      </lottie-animation-view>
      <span @fadeIn class="matching-message">Matched <span class="matching-message-bold">{{ matchResult.count }}</span> literals in <span class="matching-message-bold">{{ roundToDecimal(matchResult.totalTime / 1000, 1) }}</span> seconds</span>
      <div  @fadeIn class="btn-group btn-group-centered btn-group-stretch btn-group-medium">
        <button class="btn btn-primary" (click)="downloadResults()">Download Results</button>
        <button class="btn btn-secondary" (click)="startOver()">Start Over</button>
      </div>
    </ng-template>
    <!-- Matching Zero Results -->
    <ng-template [ngIf]="state === screenStateEnum.Results && ! matchResult.count">
      <lottie-animation-view class="matching-animation" @jumpIn [options]="lottieConfigFail" width="256" height="256" (animCreated)="delayAnimation($event, 200)">
      </lottie-animation-view>
      <span @fadeIn class="matching-message">We couldn't find any matches!</span>
      <div  @fadeIn class="btn-group btn-group-centered btn-group-stretch btn-group-medium">
        <button class="btn btn-primary" routerLink="/contribute">Help us improve</button>
        <button class="btn btn-secondary" (click)="startOver()">Start Over</button>
      </div>
    </ng-template>
    <!-- Matching Error -->
    <ng-template [ngIf]="state === screenStateEnum.Error">
      <lottie-animation-view class="matching-animation" @jumpIn [options]="lottieConfigError" width="256" height="256" (animCreated)="delayAnimation($event, 200)">
      </lottie-animation-view>
      <span @fadeIn class="matching-message">Oops! Something went wrong.</span>
      <div  @fadeIn class="btn-group btn-group-centered btn-group-stretch btn-group-medium">
        <button class="btn btn-secondary" (click)="startOver()">Start Over</button>
      </div>
    </ng-template>
  </ng-template>
  <ng-template [ngIf]="! dictionary">
    <svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 363.9 522.8" style="enable-background:new 0 0 363.9 522.8;" xml:space="preserve">
      <style type="text/css">
      	.st0{fill:url(#SVGID_4_);}
      	.st1{fill:url(#SVGID_5_);}
      	.st2{fill:url(#SVGID_6_);}
      	.st3{fill:#4E74B5;}
      </style>
      <g transform="translate(-965 -381)">
      	<g transform="translate(863.5 369.019)">
      			<radialGradient id="SVGID_4_" cx="166" cy="159.6477" r="252.5372" fx="149.9832" fy="134.5794" gradientTransform="matrix(0.73 0.6835 -0.1483 0.1584 68.5076 20.8972)" gradientUnits="userSpaceOnUse">
      			<stop  offset="0" style="stop-color:#032764"/>
      			<stop  offset="0.131" style="stop-color:#0E326F"/>
      			<stop  offset="0.706" style="stop-color:#395D9A"/>
      			<stop  offset="1" style="stop-color:#496DAA"/>
      		</radialGradient>
      		<path class="st0" d="M458.2,12.2L335,248.8l-43.7,84l-33.3,64c-19.8,38-49,33-104.6,33l94.3-181l43.7-84l62.3-119.7
      			C373.3,7.2,396.5,12.2,458.2,12.2z"/>
      			<radialGradient id="SVGID_5_" cx="415.6" cy="244.881" r="0" gradientTransform="matrix(1 0 0 -1 -218.637 396.7)" gradientUnits="userSpaceOnUse">
      			<stop  offset="0" style="stop-color:#000000;stop-opacity:0.302"/>
      			<stop  offset="5.200000e-02" style="stop-color:#161616;stop-opacity:0.337"/>
      			<stop  offset="0.187" style="stop-color:#4B4B4B;stop-opacity:0.431"/>
      			<stop  offset="0.324" style="stop-color:#777777;stop-opacity:0.525"/>
      			<stop  offset="0.461" style="stop-color:#9C9C9C;stop-opacity:0.624"/>
      			<stop  offset="0.597" style="stop-color:#B9B9B9;stop-opacity:0.718"/>
      			<stop  offset="0.732" style="stop-color:#CDCDCD;stop-opacity:0.812"/>
      			<stop  offset="0.867" style="stop-color:#D9D9D9;stop-opacity:0.906"/>
      			<stop  offset="1" style="stop-color:#DDDDDD"/>
      		</radialGradient>
      		<path class="st1" d="M197,151.8"/>
      		<radialGradient id="SVGID_6_" cx="335" cy="117.481" r="185.597" gradientUnits="userSpaceOnUse">
      			<stop  offset="0" style="stop-color:#032764"/>
      			<stop  offset="0.131" style="stop-color:#0E326F"/>
      			<stop  offset="0.706" style="stop-color:#395D9A"/>
      			<stop  offset="1" style="stop-color:#496DAA"/>
      		</radialGradient>
      		<path class="st2" d="M217,151.8H109.5l29.2-56.2l14.5-27.8"/>
      		<path class="st3" d="M335,248.8l-43.7,84l-43.7-84l-55-105.6l-39.2-75.4l0,0c41.8,0,65.9-2.3,83.3,8c8.3,4.9,15,12.7,21.3,24.9
      			l33.3,64L335,248.8z"/>
      	</g>
      	<g transform="translate(965 846.034)">
      		<path class="st3" d="M0,41V17c0-5.6,1.5-9.8,4.6-12.5c3.3-2.8,7.5-4.2,11.7-4c4.9,0,8.8,1.2,11.7,3.7c2.7,2.3,4.3,5.6,4.3,9.2
      			c0.1,0.9-0.1,1.8-0.6,2.5c-0.5,0.5-1.2,0.7-2,0.6c-1.6,0-2.4-0.7-2.6-2c-0.1-0.7-0.2-1.5-0.3-2.2c-0.2-0.8-0.5-1.7-0.9-2.4
      			c-0.5-0.9-1.1-1.7-1.8-2.4c-0.9-0.8-2-1.3-3.1-1.7c-1.5-0.5-3.1-0.7-4.7-0.7C8.8,5.2,5,9.1,5,16.9v24c0,7.9,3.8,11.8,11.5,11.8
      			c1.8,0.1,3.7-0.2,5.4-0.9c1.3-0.5,2.4-1.4,3.2-2.6c0.6-0.9,1-1.9,1.4-2.9c0.3-1,0.5-2.1,0.6-3.1c0.2-1.4,1-2,2.6-2
      			c0.7-0.1,1.4,0.2,2,0.7c0.5,0.7,0.7,1.6,0.6,2.5c0,3.6-1.6,7-4.4,9.3c-2.9,2.6-6.8,3.8-11.8,3.8c-4.8,0-8.6-1.4-11.6-4
      			C1.5,50.9,0,46.8,0,41z"/>
      		<path class="st3" d="M41.2,55.2V2.4c0-1.2,0.9-1.8,2.6-1.8s2.6,0.6,2.6,1.8v50.1h22.1c1.1,0,1.7,0.8,1.7,2.3
      			c0,1.6-0.5,2.4-1.7,2.4H43.5c-0.6,0-1.2-0.2-1.6-0.5C41.4,56.3,41.2,55.7,41.2,55.2z"/>
      		<path class="st3" d="M72.8,55c0-0.2,0-0.4,0.1-0.5L89,1.8C89.4,0.6,90.4,0,92,0s2.7,0.6,3.1,1.8l16.2,52.8c0,0.1,0,0.2,0.1,0.2
      			c0,0.1,0.1,0.2,0.1,0.2c0,0.7-0.4,1.2-1,1.5c-0.6,0.4-1.4,0.7-2.1,0.7c-0.9,0.1-1.7-0.5-2-1.3l-3.6-11.9H81.3l-3.6,11.9
      			c-0.2,0.9-0.9,1.3-2,1.3c-0.7,0-1.4-0.2-2-0.6C73.2,56.2,72.8,55.6,72.8,55z M82.8,39.5h18.8L92.2,8.2L82.8,39.5z"/>
      		<path class="st3" d="M115.8,49.4c0-0.7,0.3-1.4,0.8-1.9c0.3-0.6,0.9-0.9,1.6-1c0.4,0,0.9,0.3,1.6,1l2.2,2.2c1.1,1,2.3,1.8,3.7,2.2
      			c1.9,0.7,3.9,1,5.9,1c3.7,0,6.5-0.9,8.5-2.8s3-4.5,3-7.9c0.1-2.1-0.4-4.1-1.4-5.9c-0.9-1.6-2.2-2.8-3.7-3.7
      			c-1.6-1-3.2-1.8-4.9-2.5l-5.6-2.2c-1.8-0.7-3.4-1.5-5-2.6c-1.6-1.1-2.8-2.6-3.6-4.3c-1-2-1.5-4.3-1.4-6.6c-0.1-2.4,0.4-4.8,1.5-7
      			c0.9-1.8,2.3-3.4,4.1-4.4c1.6-0.9,3.4-1.7,5.2-2.1c1.8-0.4,3.7-0.7,5.6-0.7c3,0,6,0.4,8.9,1.4c2.8,0.9,4.1,2,4.1,3.4
      			c0,0.7-0.3,1.3-0.7,1.9c-0.3,0.6-0.9,0.9-1.6,1c-0.6-0.1-1.2-0.3-1.8-0.7c-1.2-0.6-2.4-1.1-3.7-1.4c-1.7-0.5-3.6-0.7-5.4-0.7
      			c-2.8-0.1-5.7,0.6-8.1,2.1c-2.1,1.4-3.2,3.7-3.2,6.9c-0.1,2,0.6,4,1.9,5.6c1.3,1.5,2.9,2.6,4.8,3.3c1.9,0.7,4,1.5,6.2,2.4
      			c2.1,0.9,4.2,1.9,6.2,3c2,1.2,3.7,3,4.8,5.1c1.3,2.6,2,5.5,1.9,8.5c0,5.3-1.5,9.3-4.4,11.9s-7,4-11.9,4c-4,0.1-7.9-0.9-11.3-2.9
      			C117.3,52.9,115.8,51.1,115.8,49.4z"/>
      		<path class="st3" d="M154.2,49.4c0-0.7,0.3-1.4,0.8-1.9c0.3-0.6,0.9-0.9,1.6-1c0.4,0,0.9,0.3,1.6,1l2.2,2.2c1.1,1,2.3,1.8,3.7,2.2
      			c1.9,0.7,3.9,1,5.9,1c3.7,0,6.5-0.9,8.5-2.8s3-4.5,3-7.9c0.1-2.1-0.4-4.1-1.4-5.9c-0.9-1.6-2.2-2.8-3.7-3.7
      			c-1.6-1-3.2-1.8-4.9-2.5l-5.7-2.2c-1.8-0.7-3.4-1.5-5-2.6c-1.6-1.1-2.8-2.6-3.6-4.3c-1-2-1.5-4.3-1.4-6.6c-0.1-2.4,0.4-4.8,1.5-7
      			c0.9-1.8,2.3-3.4,4.1-4.4c1.6-0.9,3.4-1.7,5.2-2.1c1.8-0.4,3.7-0.7,5.6-0.7c3,0,6,0.4,8.9,1.4c2.8,0.9,4.1,2,4.1,3.4
      			c0,0.7-0.3,1.3-0.7,1.9c-0.3,0.6-0.9,0.9-1.6,1c-0.6-0.1-1.2-0.3-1.8-0.7c-1.2-0.6-2.4-1.1-3.7-1.4c-1.7-0.5-3.6-0.7-5.4-0.7
      			c-2.8-0.1-5.7,0.6-8.1,2.1c-2.1,1.4-3.2,3.7-3.2,6.9c-0.1,2,0.6,4,1.9,5.6c1.3,1.5,2.9,2.6,4.8,3.3c1.9,0.7,4,1.5,6.2,2.4
      			c2.1,0.9,4.2,1.9,6.2,3c2,1.2,3.7,3,4.8,5.1c1.3,2.6,2,5.5,1.9,8.5c0,5.3-1.5,9.3-4.4,11.9s-7,4-11.9,4c-4,0.1-7.9-0.9-11.3-2.9
      			C155.7,52.9,154.2,51.1,154.2,49.4z"/>
      		<path class="st3" d="M195.5,55.2V2.4c0-1.2,0.9-1.8,2.6-1.8s2.6,0.6,2.6,1.8v52.8c0,0.6-0.3,1.1-0.8,1.5c-0.5,0.4-1.2,0.6-1.8,0.5
      			c-0.7,0-1.3-0.2-1.8-0.5C195.8,56.3,195.5,55.7,195.5,55.2z"/>
      		<path class="st3" d="M212.5,55.2V2.4c0-0.6,0.2-1.1,0.7-1.4c0.5-0.3,1-0.5,1.6-0.5h27.4c0.5,0,1.1,0.2,1.4,0.7
      			c0.3,0.5,0.5,1,0.5,1.6c0,0.6-0.2,1.2-0.5,1.7c-0.3,0.5-0.8,0.8-1.4,0.8h-24.7v21.3h12.3c0.5,0,1,0.2,1.4,0.7
      			c0.3,0.5,0.5,1.1,0.5,1.7c0,1.4-0.6,2.1-1.8,2.1h-12.3v24.3c0,0.6-0.3,1.1-0.8,1.4c-0.5,0.3-1.2,0.5-1.8,0.5
      			C213.3,57.2,212.5,56.5,212.5,55.2z"/>
      		<path class="st3" d="M246.4,2.7c0-0.6,0.3-1.2,0.9-1.6c0.6-0.4,1.2-0.6,1.9-0.6c0.9,0.1,1.7,0.7,2,1.6l14.3,28.3l14.3-28.3
      			c0.5-1,1.2-1.6,2-1.6c0.7,0,1.3,0.2,1.9,0.6c0.5,0.3,0.9,0.9,0.9,1.6c0,0.5-0.1,1-0.3,1.4l-16.1,30.8c-0.1,0.2-0.1,0.4-0.2,0.6
      			v19.7c0,0.6-0.3,1.1-0.8,1.5c-0.5,0.4-1.2,0.6-1.8,0.5c-0.6,0-1.3-0.2-1.8-0.5c-0.5-0.3-0.8-0.9-0.8-1.5V35.5c0-0.2,0-0.4-0.1-0.6
      			l-16-30.8C246.5,3.6,246.4,3.2,246.4,2.7z"/>
      		<path class="st3" d="M291.9,55.2V2.4c0-0.6,0.2-1.1,0.7-1.4c0.5-0.3,1-0.5,1.6-0.5h27.6c1.3,0,2,0.8,2,2.2c0,0.6-0.2,1.2-0.5,1.7
      			c-0.3,0.5-0.8,0.8-1.4,0.8h-24.8v21.3h12.2c0.5,0,1.1,0.2,1.4,0.7c0.3,0.5,0.5,1.1,0.5,1.7c0,1.4-0.7,2.1-2,2.1H297v21.5h24.8
      			c0.6,0,1.1,0.3,1.4,0.7c0.4,0.5,0.6,1.1,0.5,1.7c0,1.6-0.7,2.3-2,2.3h-27.6c-0.6,0-1.2-0.2-1.6-0.5
      			C292.2,56.3,291.9,55.8,291.9,55.2z"/>
      		<path class="st3" d="M331.3,55.2V2.4c0-1.1,0.7-1.7,2-1.8H347c5,0,9.1,1.2,12.1,3.6c3.1,2.4,4.6,6.3,4.6,11.7
      			c0,8.6-4,13.6-12.1,15l11.9,23c0.2,0.3,0.3,0.7,0.3,1c0,0.7-0.4,1.4-0.9,1.8c-0.5,0.5-1.3,0.8-2,0.8c-0.9,0-1.8-0.9-2.7-2.7
      			l-11.9-23.2h-9.8v23.8c0,0.6-0.3,1.1-0.8,1.5c-0.5,0.4-1.2,0.6-1.8,0.5c-0.7,0-1.3-0.2-1.8-0.5C331.6,56.4,331.3,55.8,331.3,55.2z
      			 M336.4,26.9H347c7.8,0,11.6-3.6,11.6-10.9c0-7.2-3.9-10.8-11.6-10.8h-10.5V26.9z"/>
      	</g>
      </g>
    </svg>
    <span class="slogan">Slogan here...</span>
  </ng-template>
</div>
